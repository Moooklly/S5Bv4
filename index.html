<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>S5B - Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ†</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <style>
    body { font-family: Tahoma, Arial; background: #121212; color: #f1f1f1; padding: 20px; margin:0; }
    header { display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 20px; }
    h1 { margin: 0; color: #fff; text-align:center; }

    /* Ø²Ø± Ø¹Ù„ÙŠØ§ Ø«Ø§Ø¨Øª */
    .admin-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 1000;
      background:#ff9800;
      color:#000;
      padding:10px 15px;
      border:none;
      border-radius:6px;
      cursor:pointer;
      font-size:14px;
    }
    .admin-btn:hover{background:#e68900;}

    /* Ø£Ø³Ø¦Ù„Ø© */
    .question{background:#1e1e1e;padding:15px;margin-bottom:15px;border-radius:8px;border:1px solid #333;}
    h2{margin:0 0 10px;font-size:18px;}
    textarea{width:100%;height:80px;border-radius:6px;border:1px solid #555;background:#2a2a2a;color:#fff;padding:8px; resize:none;}

    /* Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */
    .submit-container{
      text-align:center;
      position: sticky;
      bottom: 20px;
      background: #121212;
      padding: 10px 0;
      z-index: 500;
    }
    button.submit-btn{background:#4caf50;color:#fff;padding:12px 20px;font-size:16px;border:none;border-radius:8px;cursor:pointer;}
    button.submit-btn:hover{background:#388e3c;}

    /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± */
    #waitingMessage{
      display:none;
      background:#1e1e1e;
      padding:20px;
      border-radius:8px;
      border:1px solid #333;
      margin-top:30px;
      text-align:center;
      font-size:18px;
    }
    #retryBtn{background:#ff9800;color:#000;margin-top:20px;padding:10px 15px;border:none;border-radius:6px;cursor:pointer;}
    #retryBtn:hover{background:#e68900;}

    /* Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª */
    #answersBox{display:none;background:#1e1e1e;padding:20px;border-radius:8px;border:1px solid #333;margin-top:30px;text-align:right;}
    .submission{margin-bottom:30px;padding:10px;border:1px solid #444;border-radius:6px;background:#2a2a2a;}
    .answer-item{margin-bottom:15px;}
    .answer-item strong{color:#ff9800;}

    .back-btn{background:#f44336;color:#fff;padding:10px 15px;border:none;border-radius:6px;cursor:pointer;margin-top:20px;}
    .back-btn:hover{background:#c62828;}
  </style>
</head>
<body>

  <header>
    <h1>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ† Ù„Ù€ Ø§Ù„Ø£Ø¯Ø§Ø±Ù‡ ÙÙŠ Ø³ÙŠØ±ÙØ± ØµØ®Ø¨</h1>
    <button class="admin-btn" onclick="askPassword()">Ø¹Ù„ÙŠØ§</button>
  </header>

  <div id="questionsContainer">
    <!-- 25 Ø³Ø¤Ø§Ù„ -->
    <div class="question"><h2>Ø³Ø¤Ø§Ù„ 1: Ù…Ø§ Ù‡Ùˆ Ø§Ø³Ù…ÙƒØŸ</h2><textarea placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§"></textarea></div>
    <div class="question"><h2>Ø³Ø¤Ø§Ù„ 2: ÙƒÙ… Ø¹Ù…Ø±ÙƒØŸ</h2><textarea placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§"></textarea></div>
    <div class="question"><h2>Ø³Ø¤Ø§Ù„ 3: Ø£ÙŠÙ† ØªØ³ÙƒÙ†ØŸ</h2><textarea placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§"></textarea></div>

    <script>
      const container = document.getElementById("questionsContainer");
      for (let i=4; i<=25; i++){
        const div = document.createElement("div");
        div.className="question";
        div.innerHTML=`<h2>Ø³Ø¤Ø§Ù„ ${i}: Ø£ÙŠÙ† ØªØ³ÙƒÙ†ØŸ</h2><textarea placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§"></textarea>`;
        container.appendChild(div);
      }
    </script>

    <div class="submit-container">
      <button class="submit-btn" onclick="collectAnswers()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
    </div>
  </div>

  <div id="waitingMessage">
    <p>âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­ØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯ Ù…Ù† Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†.</p>
    <button id="retryBtn" onclick="retryExam()">ğŸ”„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù† Ø¬Ø¯ÙŠØ¯</button>
  </div>

  <div id="answersBox">
    <h2>Ø¬Ù…ÙŠØ¹ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ†</h2>
    <div id="answersList"></div>
    <button class="back-btn" onclick="goBack()">Ø¹ÙˆØ¯Ø©</button>
  </div>

  <script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase - Ø§Ø³ØªØ¨Ø¯Ù„Ù‡Ø§ Ø¨Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ
const firebaseConfig = {
  apiKey: "AIzaSyCpkkn44WjU8fzKoWtnyj69ajiDJFm9I6c",
  authDomain: "s5b1-4265d.firebaseapp.com",
  projectId: "s5b1-4265d",
  storageBucket: "s5b1-4265d.firebasestorage.app",
  messagingSenderId: "318029605221",
  appId: "1:318029605221:web:5b0b50ba27aa889d90198c",
  measurementId: "G-VL9DE9P7Z0"
};
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function collectAnswers() {
      const questions = document.querySelectorAll(".question h2");
      const answers = document.querySelectorAll(".question textarea");
      let submission = [];
      questions.forEach((q,i)=>{
        submission.push({question:q.innerText, answer:answers[i].value || "Ù„Ù… ØªØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©"});
      });

      const newKey = db.ref('submissions').push().key;
      db.ref('submissions/' + newKey).set(submission);

      alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­!");
      document.getElementById("questionsContainer").style.display="none";
      document.getElementById("waitingMessage").style.display="block";
    }

    function askPassword() {
      const password = prompt("Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:");
      if(password==="00124"){ showAnswers(); }
      else if(password!==null){ alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©"); }
    }

    function retryExam(){
      const password = prompt("Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:");
      if(password==="00124"){ resetExam(); }
      else if(password!==null){ alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©"); }
    }

    function resetExam(){
      document.querySelectorAll(".question textarea").forEach(t=>t.value="");
      document.getElementById("waitingMessage").style.display="none";
      document.getElementById("answersBox").style.display="none";
      document.getElementById("questionsContainer").style.display="block";
    }

    function showAnswers(){
      const answersList=document.getElementById("answersList");
      answersList.innerHTML="";
      db.ref('submissions').once('value', snapshot=>{
        const data = snapshot.val();
        if(!data){ answersList.innerHTML="<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¨Ø¹Ø¯.</p>"; return; }
        Object.keys(data).forEach((key,index)=>{
          const submission = data[key];
          const div = document.createElement("div");
          div.className="submission";
          div.innerHTML=`<h3>ğŸ“Œ Ø§Ù„Ù…Ø±Ø´Ø­ Ø±Ù‚Ù… ${index+1}</h3>`;
          submission.forEach(item=>{
            div.innerHTML+=`<div class="answer-item"><strong>${item.question}</strong><br>${item.answer}</div>`;
          });
          answersList.appendChild(div);
        });
      });
      document.getElementById("waitingMessage").style.display="none";
      document.getElementById("questionsContainer").style.display="none";
      document.getElementById("answersBox").style.display="block";
    }

    function goBack(){
      document.getElementById("answersBox").style.display="none";
      document.getElementById("waitingMessage").style.display="none";
      document.getElementById("questionsContainer").style.display="block";
    }
  </script>
</body>
</html>
